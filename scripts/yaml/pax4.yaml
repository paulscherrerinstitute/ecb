axis:
  id: $(AX_ID)
  group: $(AX_GROUP)
  mode: CSV
  features:
    allowSrcChangeWhenEnabled: true

epics:
  name: $(AX_NAME)
  precision: 4
  unit: mm
  motorRecord:
    description: $(AX_LOCATION)
    fieldInit: "SPAM=0,RTRY=1,FOFF=Frozen,TWV=1"

drive:
  numerator: -0.2
  denominator: 32768
  type: 0
  control: ec$(ECMC_EC_MASTER_ID).s$(DRIVE_SLAVE).driveControl01
  status: ec$(ECMC_EC_MASTER_ID).s$(DRIVE_SLAVE).driveStatus01
  setpoint: ec$(ECMC_EC_MASTER_ID).s$(DRIVE_SLAVE).velocitySetpoint01
  reduceTorque: 2
  reduceTorqueEnable: true
  reset: 1
  warning: 2
  error:
    - 3

encoder:
  numerator: $(ZG)
  denominator: 1000000
  type: 1               # absolute encoder
  bits: 32
  absBits: 32
  absOffset: $(ZO)
  control: ec$(ECMC_EC_MASTER_ID).s$(ENCODER_SLAVE).encoderControl$(ENCODER_CHANNEL)
  position: ec$(ECMC_EC_MASTER_ID).s$(ENCODER_SLAVE).positionActual$(ENCODER_CHANNEL)
  status: ec$(ECMC_EC_MASTER_ID).s$(ENCODER_SLAVE).encoderStatus$(ENCODER_CHANNEL)
  warning: 0
  error:
    - 1

controller:
  Kp: 1.00
  Ki: 0.000
  Kd: 0.000
  Kff: 1.00

trajectory:
  axis:
    velocity: 0.15
    acceleration: 0.4
    deceleration: 0.1

input:
  limit:
    forward: ec$(ECMC_EC_MASTER_ID).s$(DRIVE_SLAVE).driveStatus01.12
    backward: ec$(ECMC_EC_MASTER_ID).s$(DRIVE_SLAVE).driveStatus01.11
    # forward: ec$(ECMC_EC_MASTER_ID).s$(DRIVE_SLAVE).ONE.0
    # backward: ec$(ECMC_EC_MASTER_ID).s$(DRIVE_SLAVE).ONE.0
  home: ec$(ECMC_EC_MASTER_ID).s$(DRIVE_SLAVE).ONE.0
  interlock: ec$(ECMC_EC_MASTER_ID).s$(DRIVE_SLAVE).ONE.0

softlimits:
  enable: true
  backwardEnable: true
  forwardEnable: true
  forward: 14.25         # max gap = 28.5mm
  backward: 1            # min gap = 2mm

monitoring:
  lag:
    enable: true
    tolerance: 0.1
    time: 100
  target:
    enable: true
    tolerance: 0.0001
    time: 100
  velocity:
    enable: true
    max: 1.2
    time:
      trajectory: 100
      drive: 200

plc:
  enable: true
  externalCommands: true
