

axis:
  id: $(AX_ID)
  mode: CSV
  group: X_REAL
  type: 1
  feedSwitchesOutput: ec$(ECMC_EC_MASTER_ID).s$(BO_SID).binaryOutput$(BO_CH)
  parameters: powerAutoOnOff=2;powerOnDelay=6.0;powerOffDelay=1.0;
  features:
    allowSrcChangeWhenEnabled: true

epics:
  name: TRXR
  precision: 4
  unit: mm
  motorRecord:
    enable: true
    description: "Inner horizontal diaphragm slit"
    fieldInit: "RTRY=0,FOFF=Frozen,TWV=0.1"

drive:
  numerator: 10.0               # Scaling factor and Vmax (equivalent distance of 2000 steps)
  denominator: 32768            # Always MAX_INT16 for this stepper drive!
  type: 0                       # Motor type (0=Stepper, 1=Other)
  control: ec$(ECMC_EC_MASTER_ID).s$(DRV_SID).driveControl01
  status: ec$(ECMC_EC_MASTER_ID).s$(DRV_SID).driveStatus01
  setpoint: ec$(ECMC_EC_MASTER_ID).s$(DRV_SID).velocitySetpoint01
  reduceTorqueEnable: yes
  reduceTorque: 2
  reset: 1
  warning: 7
  error:
    - 3              # Error 0 bit of status word

encoder:
  numerator: -1         # 1egu = 1mm
  denominator: 1000000  # Encoder step size is 1nm
  type: 1               # Encoder type (0=Incremental, 1=Absolute)
  bits: 32              # Total bit count of encoder raw data
  absBits: 32           # Absolute bit count (for absolute encoders)
  absOffset: 36.8179
  position: ec$(ECMC_EC_MASTER_ID).s$(ENC_SID).positionActual$(ENC_CH)

controller:
  Kp: 10.00
  Ki: 0.010
  Kd: 0.000

trajectory:
  axis:
    velocity: 0.5
    acceleration: 10
    deceleration: 10

input:
  limit:
    forward: ec$(ECMC_EC_MASTER_ID).s$(DRV_SID).driveStatus01.11
    backward: ec$(ECMC_EC_MASTER_ID).s$(DRV_SID).driveStatus01.12
  home: ec$(ECMC_EC_MASTER_ID).s$(DRV_SID).ONE.0
  interlock: ec$(ECMC_EC_MASTER_ID).s$(DRV_SID).ONE.0

softlimits:
  enable: yes
  backwardEnable: yes
  forwardEnable: yes
  forward: 8.3
  backward: -6.1

monitoring:
  lag:
    enable: yes
    tolerance: 0.05
    time: 100
  target:
    enable: yes
    tolerance: 0.001
    time: 100
  velocity:
    enable: no
    max: 0.6
    time:
      trajectory: 100
      drive: 200
